{% if g.search_background %} {% set background = g.search_background %} {% else
%} {% set background = '/base/images/bg-banner.jpg' %} {% endif %}

<style>
  .homepage .stats ul li {
    float: center;
    width: 33%;
  }
</style>
<div role="main" class="hero" style="background-image: url('{{ background }}')">
  <div class="container">
    <div class="row row1">
      <div class="col-md-6 col1">
        {% block promoted %} {% snippet 'home/snippets/promoted.html' %} {%
        endblock %}
      </div>
      <div class="col-md-6 col2" style="position: unset">
        {% block search %} {% snippet 'home/snippets/search.html' %} {% endblock
        %}
        <br />
        {% block stats %} {% snippet 'home/snippets/stats.html' %} {% endblock
        %}
      </div>
    </div>
  </div>
</div>
<div role="main">
  <div class="container">
    <div class="row row1">
      <div class="text-center costom-header">
        <h2>{{ _("Data set group") }}</h2>
      </div>
    </div>

    <div class="row row2">
      {% block featured_group %} {% set category_dict =
      h.scheming_group_schemas() %} {% if category_dict and
      category_dict.keys()|length %} {% snippet
      'home/snippets/multi_groups.html', category_dict=category_dict %} {% else
      %} {% set stats = h.get_site_statistics() %} {% snippet
      'home/snippets/groups.html', stats=stats %} {% endif %} {% endblock %}
    </div>
  </div>

  <div id="new-section" class="container">
    <div class="row row1">
      <div class="text-center costom-header">
        <h2>{{ _("Articles or news about information") }}</h2>
      </div>
    </div>

    <div class="row row2">
      {% block feature_articles_news %}
          {% set category_articles_news = h.thai_gdc_get_articles_news_list() %}
          {% snippet 'home/snippets/articles_news.html', category_articles_news=category_articles_news %}
      {% endblock %}
    </div>
    <div class="text-right">
      <a href="{{ h.url_for(controller='ckanext.thai_gdc.controllers.user:UserManageController',action='articles_news') }}" class="btn btn-default">เพิ่มเติม</a>
    </div>
  </div>

  <div id="userstatistics-section" class="container">
    <div class="row row1">
      <div class="text-center costom-header">
        <h2>{{ _("User statistics") }}</h2>
      </div>
    </div>

    <div class="row row2">
      <div class="col-md-12 col-lg-8">
        <div class="panel panel-default">
          <!-- Default panel contents -->
          <div class="panel-heading">สถิติข้อมูล 21 กุมภาพันธ์ 2567</div>
          <div class="panel-body">
            <table class="table">
              <tbody>
                <tr>
                  <td>รายงาน COVID-19 ประจำวัน ข้อมูลประจำประเทศไทย</td>
                  <td class="text-right">801,583</td>
                </tr>
                <tr>
                  <td>สังคม-วัฒนธรรมในเอเชียตะวันออกเฉียงใต้</td>
                  <td class="text-right">63,188</td>
                </tr>
                <tr>
                  <td>แบบฟอร์มคำขอดำเนินการทางทะเบียนรถยนต์</td>
                  <td class="text-right">46,662</td>
                </tr>
                <tr>
                  <td>ข้อมูลโรงเรียนสังกัด สพฐ</td>
                  <td class="text-right">46.053</td>
                </tr>
                <tr>
                  <td>ข้อมูลพิกัด LAT/LONG ที่ตั้งตำบล</td>
                  <td class="text-right">31,564</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <div class="col-md-6 col-lg-4">
        <div class="panel panel-default">
          <!-- Default panel contents -->
          <div class="panel-heading">ภาพรวม</div>
          <div class="panel-body text-center">
            <canvas id="ChartOverview" style="width: 50%"></canvas>

            <script>
              const ChartOverviewxValues = [
                "ชุดข้อมูล(11,001)",
                "องค์กร(1,390)",
                "หมวดหมู่",
              ];
              const ChartOverviewyValues = [11001, 1390, 0];
              const ChartOverviewbarColors = ["#065381", "#65cae6", "#e54854"];

              new Chart("ChartOverview", {
                type: "pie",
                data: {
                  labels: ChartOverviewxValues,
                  datasets: [
                    {
                      backgroundColor: ChartOverviewbarColors,
                      data: ChartOverviewyValues,
                    },
                  ],
                },
                options: {
                  plugins: {
                    legend: {
                      position: "bottom",
                    },
                    title: {
                      display: false,
                    },
                  },
                },
              });
            </script>
          </div>
        </div>
      </div>

      <div class="col-md-6 col-lg-4">
        <div class="panel panel-default">
          <!-- Default panel contents -->
          <div class="panel-heading">
            จำนวนผู้เข้าใช้บริการ / จำนวนการใช้งาน
          </div>
          <div class="panel-body text-center box-count">
            <i class="fa fa-eye" aria-hidden="true"></i>

            <h4>3,878,375 คน</h4>
            <h4>14,920,495 ครั้ง</h4>
          </div>
        </div>
      </div>

      <div class="col-md-6 col-lg-4">
        <div class="panel panel-default">
          <!-- Default panel contents -->
          <div class="panel-heading">จำนวนข้อมูลจำแนกตามหมวดหมู่</div>
          <div class="panel-body text-center">
            <i class="fa fa-users" aria-hidden="true"></i>
            <canvas id="ChartCategory" style="width: 70%"></canvas>

            <script>
              const ChartCategoryxValues = [
                "เศรษฐกิจ การเงิน และอุดสาหกรรม",
                "ทรัพยากรธรรมชาติและสิ่งแวดล้อม",
                "เกษตรกรรม",
                "คมนาคมและโลจิสติกส์",
                "งบประมาณและการใช้จ่ายของภาครัฐ",
                "เมืองและภูมิภาค",
              ];
              const ChartCategoryyValues = [10, 10, 10, 10, 10, 10];
              const ChartCategorybarColors = [
                "#065381",
                "#65cae6",
                "#e54854",
                "#ff9b2c",
                "#5dd5d4",
                "#8b123f",
              ];

              new Chart("ChartCategory", {
                type: "doughnut",
                data: {
                  labels: ChartCategoryxValues,
                  datasets: [
                    {
                      backgroundColor: ChartCategorybarColors,
                      data: ChartCategoryyValues,
                    },
                  ],
                },
                options: {
                  plugins: {
                    legend: {
                      position: "bottom",
                    },
                    title: {
                      display: false,
                    },
                  },
                },
              });
            </script>
          </div>
        </div>
      </div>

      <div class="col-md-6 col-lg-4">
        <div class="panel panel-default">
          <!-- Default panel contents -->
          <div class="panel-heading">จำนวนข้อมูลจำแนกตามองค์กร</div>
          <div class="panel-body text-center">
            <i class="fa fa-building" aria-hidden="true"></i>
            <canvas id="ChartOrg" style="width: 70%"></canvas>

            <script>
              const ChartOrgxValues = [
                "กรุงเทพมหานคร",
                "สำนักงานสถิติแห่งชาติ",
                "กรมธุรกิจพลังงาน",
                "ธนาคารแห่งประเทศไทย",
                "สำนักงานจังหวัดฉะเชิงเกรา",
                "สำนักงานจังหวัดชลบุรี",
              ];
              const ChartOrgyValues = [10, 10, 10, 10, 10, 10];
              const ChartOrgbarColors = [
                "#065381",
                "#65cae6",
                "#e54854",
                "#ff9b2c",
                "#5dd5d4",
                "#8b123f",
              ];

              new Chart("ChartOrg", {
                type: "doughnut",
                data: {
                  labels: ChartOrgxValues,
                  datasets: [
                    {
                      backgroundColor: ChartOrgbarColors,
                      data: ChartOrgyValues,
                    },
                  ],
                },
                options: {
                  plugins: {
                    legend: {
                      position: "bottom",
                    },
                    title: {
                      display: false,
                    },
                  },
                },
              });
            </script>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

{% block layout_extra %} {% set event_conf =
h.gdc_agency_get_conf_group('EVENT') %} {% if event_conf.EVENT_PUBLIC and
event_conf.EVENT_PUBLIC == 'True' %} {% if event_conf.EVENT_IMAGE %}
<div class="modal fade" id="homeEventModal" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">
          &times;
        </button>
      </div>
      <div class="modal-body">
        <img
          src="{{event_conf.EVENT_IMAGE}}"
          style="width: 100%"
          alt="event popup banner image"
        />
      </div>
      {% if event_conf.EVENT_URL and event_conf.EVENT_URL != '' %}
      <div class="modal-footer">
        <a
          href="{{event_conf.EVENT_URL}}"
          class="btn btn-success"
          target="_blank"
        >
          {{event_conf.EVENT_TEXT if event_conf.EVENT_TEXT else 'เพิ่มเติม'}}
        </a>
      </div>
      {% endif %}
    </div>
  </div>
</div>
<script>
  setTimeout(() => {
    $("#homeEventModal").modal("show");
  }, 500);
</script>
{% endif %} {% endif %} {% endblock %}
